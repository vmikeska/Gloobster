var __extends=this&&this.__extends||function(t,o){function e(){this.constructor=t}for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n]);t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)},Views;!function(t){var o=function(o){function e(t){o.call(this),this.initialize(t)}return __extends(e,o),e.prototype.initialize=function(t){var o=this;this.tripId=t,this.maps=new Maps.MapsCreatorMapBox2D,this.maps.setRootElement("map"),this.maps.show(function(t){o.map=t,o.getData(function(t){o.trip=t,o.draw(t)})})},e.prototype.draw=function(t){for(var o=0;o<=t.places.length-2;o++){var e=t.places[o],n=t.places[o+1],a=new L.LatLng(e.place.coordinates.Lat,e.place.coordinates.Lng),i=new L.LatLng(n.place.coordinates.Lat,n.place.coordinates.Lng),p=[a,i],s={color:"red",weight:3,opacity:.5,smoothFactor:1},r=new L.polyline(p,s);r.addTo(this.map)}},e.prototype.getData=function(o){var e=[["tripId",this.tripId]];t.ViewBase.currentView.apiGet("tripShare",e,function(t){return o(t)})},e}(t.ViewBase);t.ShareTripView=o}(Views||(Views={}));var Maps;!function(t){var o=function(){function t(){this.options={tileLayer:{continuousWorld:!1,noWrap:!0},maxBounds:null,maxZoom:19,minZoom:2}}return t.prototype.setRootElement=function(t){this.rootElement=t},t.prototype.setMapType=function(t){this.mapType=t},t.prototype.show=function(t){var o=this,e=this;this.loadScript("http://cdn.leafletjs.com/leaflet-0.7.5/leaflet.js",function(){e.loadScript("https://api.mapbox.com/mapbox.js/v2.2.2/mapbox.js",function(){e.loadScript("https://api.mapbox.com/mapbox.js/plugins/leaflet-heat/v0.1.3/leaflet-heat.js",function(){e.loadMap(),t(o.mapObj)})})})},t.prototype.loadMap=function(){var t=this;L.mapbox.accessToken="pk.eyJ1IjoiZ2xvb2JzdGVyIiwiYSI6ImQxZWY5MjRkZjU1NDk2MGU3OWI2OGRiM2U3NTM0MGYxIn0.nCG7hOsSQzb0c-_qzfTCRQ",this.options.maxBounds=L.latLngBounds(L.latLng(-85,-180),L.latLng(85,180)),this.mapObj=L.mapbox.map(this.rootElement,"gloobster.afeef633",this.options),this.mapObj.on("move",function(o){if(t.onCenterChanged){var e=t.mapObj.getCenter();t.onCenterChanged(e)}})},t.prototype.loadScript=function(t,o){$.getScript(t,function(t,e,n){o()})},t.prototype.hide=function(){this.mapObj.remove()},t}();t.MapsCreatorMapBox2D=o}(Maps||(Maps={}));