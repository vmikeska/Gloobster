var __extends=this&&this.__extends||function(t,o){function n(){this.constructor=t}for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e]);t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)},Views;!function(t){var o=function(o){function n(t){o.call(this),this.initialize(t)}return __extends(n,o),n.prototype.initialize=function(t){var o=this;this.tripId=t,this.maps=new Maps.MapsCreatorMapBox2D,this.maps.setRootElement("map"),this.maps.show(function(t){o.map=t,o.getData(function(t){o.trip=t,o.draw(t)})})},n.prototype.draw=function(t){for(var o=0;o<=t.places.length-2;o++){var n=t.places[o],e=t.places[o+1],i=new L.LatLng(n.place.coordinates.Lat,n.place.coordinates.Lng),a=new L.LatLng(e.place.coordinates.Lat,e.place.coordinates.Lng),r=[i,a],p={color:"red",weight:3,opacity:.5,smoothFactor:1},s=new L.polyline(r,p);s.addTo(this.map)}},n.prototype.getData=function(o){var n=[["tripId",this.tripId]];t.ViewBase.currentView.apiGet("tripShare",n,function(t){return o(t)})},n}(t.ViewBase);t.ShareTripView=o}(Views||(Views={}));var Maps;!function(t){var o=function(){function t(){this.options={tileLayer:{continuousWorld:!1,noWrap:!0},maxBounds:null,maxZoom:19,minZoom:2}}return t.prototype.setRootElement=function(t){this.rootElement=t},t.prototype.show=function(t){var o=this;o.loadMap(),t(this.mapObj)},t.prototype.loadMap=function(){var t=this;L.mapbox.accessToken="pk.eyJ1IjoiZ2xvb2JzdGVyIiwiYSI6ImQxZWY5MjRkZjU1NDk2MGU3OWI2OGRiM2U3NTM0MGYxIn0.nCG7hOsSQzb0c-_qzfTCRQ",this.options.maxBounds=L.latLngBounds(L.latLng(-85,-180),L.latLng(85,180)),this.mapObj=L.mapbox.map(this.rootElement,"gloobster.afeef633",this.options),this.mapObj.on("move",function(o){if(t.onCenterChanged){var n=t.mapObj.getCenter();t.onCenterChanged(n)}})},t.prototype.loadScript=function(t,o){$.getScript(t,function(t,n,e){o()})},t.prototype.hide=function(){this.mapObj.remove()},t}();t.MapsCreatorMapBox2D=o}(Maps||(Maps={}));