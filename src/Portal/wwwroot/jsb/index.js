var __extends=this&&this.__extends||function(e,n){function t(){this.constructor=e}for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)},Views;!function(e){var n=function(n){function t(){n.call(this),e.SettingsUtils.registerLocationCombo("currentCity","CurrentLocation",function(){window.location.href="/Destination/planning"})}return __extends(t,n),Object.defineProperty(t.prototype,"pageType",{get:function(){return e.PageType.HomePage},enumerable:!0,configurable:!0}),t}(e.ViewBase);e.HomePageView=n}(Views||(Views={}));var Views;!function(e){var n=function(){function n(){}return n.registerAvatarFileUpload=function(e,n){void 0===n&&(n=null);var t=new Common.FileUploadConfig;t.inputId=e,t.endpoint="UploadAvatar",t.maxFileSize=55e5,t.useMaxSizeValidation=!1;var i=new Common.FileUpload(t);i.onProgressChanged=function(e){$("#progressBar").text(e)},i.onUploadFinished=function(e){var t=new Date;$("#avatar").attr("src","/PortalUser/ProfilePicture?d="+t.getTime()),n&&n()}},n.registerEdit=function(e,n,t,i){var r=this;void 0===i&&(i=null);var a=new Common.DelayedCallback(e);a.callback=function(e){var a=t(e);r.callServer(n,a,i)}},n.registerCombo=function(n,t){var i=$("#"+n),r=i.find("input");r.change(function(n){var i=r.val(),a=t(i);e.ViewBase.currentView.apiPut("UserProperty",a,function(){})})},n.callServer=function(n,t,i){void 0===i&&(i=null);var r={propertyName:n,values:t};e.ViewBase.currentView.apiPut("UserProperty",r,function(){i&&i()})},n.registerLocationCombo=function(e,n,t){var i=this;void 0===t&&(t=null);var r=this.getLocationBaseConfig();r.elementId=e;var a=new Common.PlaceSearchBox(r);return a.onPlaceSelected=function(e){i.callServer(n,{sourceId:e.SourceId,sourceType:e.SourceType},t)},a},n.initLangsTagger=function(e){var n=this,t=TravelB.TravelBUtils.langsDB(),i=_.map(t,function(e){return{text:e.text,value:e.id,kind:"l"}}),r=new Planning.TaggingFieldConfig;r.containerId="langsTagging",r.localValues=!0,r.itemsRange=i;var a=new Planning.TaggingField(r);a.onItemClickedCustom=function(e,t){var i=e.data("vl");n.callServer("Langs",{value:i,action:"ADD"},t)},a.onDeleteCustom=function(e,t){n.callServer("Langs",{value:e,action:"DEL"},t)};var o=_.map(e,function(e){return{value:e,kind:"l"}});return a.setSelectedItems(o),a},n.getLocationBaseConfig=function(){var e=new Common.PlaceSearchConfig;return e.providers="2",e.minCharsToSearch=1,e.clearAfterSearch=!1,e},n}();e.SettingsUtils=n}(Views||(Views={}));