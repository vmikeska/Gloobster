var __extends=this&&this.__extends||function(e,n){function t(){this.constructor=e}for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)},Views;!function(e){var n=function(n){function t(){n.call(this),e.SettingsUtils.registerLocationCombo($("#currentCity"),"CurrentLocation",function(){window.location.href="/Destination/planning"})}return __extends(t,n),Object.defineProperty(t.prototype,"pageType",{get:function(){return e.PageType.HomePage},enumerable:!0,configurable:!0}),t}(e.ViewBase);e.HomePageView=n}(Views||(Views={}));var Views;!function(e){var n=function(){function n(){}return n.yearValidation=function(e){return 4!==e.length?!1:null!==Common.F.tryParseInt(e)},n.registerAvatarFileUpload=function(e,n){void 0===n&&(n=null);var t=new Common.FileUploadConfig;t.inputId=e,t.endpoint="UploadAvatar",t.maxFileSize=55e5,t.useMaxSizeValidation=!1;var r=new Common.FileUpload(t);r.onProgressChanged=function(e){$("#progressBar").text(e)},r.onUploadFinished=function(t){var r=new Date;$("#avatar").attr("src","/PortalUser/ProfilePicture?d="+r.getTime()),$("#"+e).data("valid",!0),n&&n()}},n.registerEdit=function(e,n,t,r){var a=this;void 0===r&&(r=null);var i=$("#"+e),o=new Common.DelayedCallback(e);o.callback=function(e){"number"===i.attr("type")&&(e=Common.F.tryParseInt(e));var o=t(e);a.callServer(n,o,r)}},n.registerCombo=function(n,t){var r=$("#"+n),a=r.find("input");a.change(function(n){var r=a.val(),i=t(r);e.ViewBase.currentView.apiPut("UserProperty",i,function(){})})},n.callServer=function(n,t,r){void 0===r&&(r=null);var a={propertyName:n,values:t};e.ViewBase.currentView.apiPut("UserProperty",a,function(){r&&r()})},n.registerLocationCombo=function(e,n,t){var r=this;void 0===t&&(t=null);var a=this.getLocationBaseConfig();a.selOjb=e;var i=new Common.PlaceSearchBox(a);return e.change(function(e,a){r.callServer(n,{sourceId:a.SourceId,sourceType:a.SourceType},t)}),i},n.initInterests=function(e,t){var r=new TravelB.CategoryTagger;r.onFilterChange=function(e,t){var r=e?"ADD":"DEL";n.callServer("Inters",{value:t,action:r},function(){})};var a=TravelB.TravelBUtils.getInterestsTaggerData();r.create(e,"inters",a,"Pick some characteristics of you"),r.initData(t)},n.initLangsTagger=function(e){var n=this,t=TravelB.TravelBUtils.langsDB(),r=_.map(t,function(e){return{text:e.text,value:e.id,kind:"l"}}),a=new Planning.TaggingFieldConfig;a.containerId="langsTagging",a.localValues=!0,a.itemsRange=r;var i=new Planning.TaggingField(a);i.onItemClickedCustom=function(e,t){var r=e.data("vl");n.callServer("Langs",{value:r,action:"ADD"},t)},i.onDeleteCustom=function(e,t){n.callServer("Langs",{value:e,action:"DEL"},t)};var o=_.map(e,function(e){return{value:e,kind:"l"}});return i.setSelectedItems(o),i},n.getLocationBaseConfig=function(){var e=new Common.PlaceSearchConfig;return e.providers="2",e.minCharsToSearch=1,e.clearAfterSearch=!1,e},n}();e.SettingsUtils=n}(Views||(Views={}));