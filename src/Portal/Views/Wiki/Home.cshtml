@using System.Linq;
@using System.Threading.Tasks
@using Gloobster.Common
@using Gloobster.Entities
@using Gloobster.Portal.ViewModels
@model WikiHomeViewModel
@{
    ViewBag.MenuGroup = "Wiki";
    ViewBag.BodyClass = "wiki";
    ViewData["Title"] = "Wiki home";
    Layout = "_LayoutNew";

    var prague = Model.TextById(3067696);

    var smallArticles = Model.Articles.Where(a => a.GID != 3067696);    
}

@if (GloobsterConfig.UseMiniScripts)
{    
    @*<script src="/jsb/nindex.js" type="text/javascript" data-notbuild="true"></script>*@
}
else
{
    <link href="~/css/main.css" rel="stylesheet" />

    <script type="text/javascript" src="@Url.Content("~/js/Views/WikiHomeView.js")"></script>
    <script type="text/javascript" src="@Url.Content("~/js/Views/WikiSearchCombo.js")"></script>
}

<div class="wiki_header_all">
    <div class="wiki_header">
        <div class="bck">
            <div class="search_all">
                <div class="circle-bck">

                </div>
                
            </div>

        </div>
    </div>

    <div class="cont">
        <h1>@Model.W("Title")</h1>

        <div>
            <div id="SearchCombo" class="dropdown search">
                <input class="inputed" type="text" placeholder="@Model.W("SearchPlaceholder")">
                <img class="loader" src="/images/loader-gray.gif" style="display: none" />
                <ul style="text-align: left"></ul>
            </div>
        </div>
    </div>
</div>

<div class="wiki_info">

    <div class="block bl">
        <div class="ico"><img src="/images/n/pencil.svg"/>
        </div>
        <div class="title">
            <h2>@Model.W("MottoForTravelers")</h2>
        </div>
        <div class="text">
            @Model.W("ForTravelersText")
        </div>
        @*<div class="btn">
            <a class="lbtn" href="#">@Model.W("LearnMoreBtn")</a>
        </div>*@
    </div>
    
    <div class="block br">
        <div class="ico"><img src="/images/n/guy.svg"/>
        </div>
        <div class="title">
            <h2>@Model.W("MottoHelpUs")</h2>
        </div>
        <div class="text">
            @Model.W("HelpUsText")
        </div>
        @*<div class="btn">
            <a class="lbtn" href="#">@Model.W("JoinUsBtn")</a>
        </div>*@
    </div>
</div>

<h2>Latests Articles</h2>

<div class="wiki_article_wide wrapper">

    <div class="photo">
        <div class="bck">
            <img src="/picd/3067696/whb"/>
        </div>
    </div>
    <div class="service">
        <div class="title">
            <a href="/wiki/prague">
                <h2>@prague.Title</h2>
            </a>
        </div>

        @Html.Partial("Stars", prague.Rating)
    </div>

    <p class="txt">
        @Model.SectionText(prague, "Base").Text
    </p>
</div>

<div class="wiki_articles wrapper">

    @foreach (var article in smallArticles)
    {
        @Html.Partial("NewArticle", article)            
    }

    @*<div class="rate">
            @Html.Partial("NewArticleRating")
        </div>*@

</div>

<div class="counties">

    <h2>Learn more about countries</h2>

    <div class="wrapper">

        @foreach (var block in Model.GetCountryLinks())
        {
            <div class="block">
                @foreach (var item in block)
                {
                    <div class="item">
                        <a href="/wiki/@item.Link">@item.Title</a>
                    </div>
                }
            </div>
        }

    </div>
</div>

<script>
	function onBodyLoad() {
	    currentView = new Views.WikiHomeView();
	}

</script>